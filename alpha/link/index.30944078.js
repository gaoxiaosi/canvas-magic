const e=100,t=e/12,l=e/2,o=6*(e+10)+10+2*l,r=6*(e+10)+10+2*l,n=["A","B","C","D","E","F","G"],y=["#409EFF","#67C23A","#E6A23C","#F56C6C","#B37FEB","#FF85C0","#36CFC9"],f="#00AEEC";let i=document.createElement("canvas"),s=i.getContext("2d");i.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",i.width=o,i.height=r,document.body.appendChild(i),document.body.style.backgroundColor="#F8BBD0";let x=Array.from({length:8},()=>Array(8).fill(-1)),c={x:-1,y:-1},a=0;i.onclick=t=>{let[o,r]=[t.offsetX,t.offsetY].map(t=>Math.ceil((t-l)/(e+10)));if(t.offsetX-(o-1)*(e+10)-l<10||t.offsetY-(r-1)*(e+10)-l<10||-1===x[o][r])return;h(o,r);let n=c.x,y=c.y;if(-1===n&&-1===y)c={x:o,y:r};else{if(n===o&&y===r){c={x:-1,y:-1},m(o,r);return}C(c,{x:o,y:r})?(x[n][y]=-1,x[o][r]=-1,c={x:-1,y:-1},a++,B(),d()&&alert("游戏结束，你赢了")):(m(n,y),c={x:o,y:r})}};const d=()=>2*a==36,F=(e,t)=>{let{x:l,y:o}=e,{x:r,y:n}=t;return l===r?(o>n&&([o,n]=[n,o]),x[l].slice(o+1,n).every(e=>-1===e)):o===n&&(l>r&&([l,r]=[r,l]),x.slice(l+1,r).every(e=>-1===e[o]))},u=(e,t)=>{let{x:l,y:o}=e,{x:r,y:n}=t;for(let[e,y]of[[1,0],[-1,0],[0,1],[0,-1]]){let f=0,i=l,s=o,c={},a={};for(;x[i=l+e*++f]?.[s=o+y*f]===-1;)if(c={x:i,y:s},(a=0===e?{x:r,y:s}:{x:i,y:n}).x===r&&a.y===n&&F(c,t)||-1===x[a.x][a.y]&&F(c,a)&&F(a,t))return!0}return!1},C=(e,t)=>x[e.x][e.y]===x[t.x][t.y]&&(!!F(e,t)||u(e,t)),h=(l,o,r=f)=>{s.strokeStyle=r,s.lineWidth=t,s.strokeRect(p(l)+t/2,p(o)+t/2,e-t,e-t)},m=(e,t)=>E(e,t,x[e][t]),p=t=>(t-1)*(e+10)+10+l,g=e=>e.sort(()=>Math.random()-.5),A=()=>{let e=[],t=0;for(let l=0;l<18;l++)t=l%n.length,e.push(t,t);e=g(e);for(let t=1;t<7;t++)for(let l=1;l<7;l++)x[t][l]=e.pop()},E=(t,l,o,r=e)=>{t=p(t),l=p(l),s.fillStyle=y[o%y.length],s.fillRect(t,l,r,r),s.font="40px serif",s.fillStyle="#FFFFFF",s.textBaseline="middle",s.textAlign="center",s.fillText(n[o],t+r/2,l+r/2)},B=()=>{s.clearRect(0,0,o,r);for(let e=1;e<7;e++)for(let t=1;t<7;t++)-1!==x[e][t]&&E(e,t,x[e][t])},b=async()=>{A(),B()};window.onload=b;