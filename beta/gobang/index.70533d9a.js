let t;var e,l=globalThis,i={},n={},a=l.parcelRequire6f20;null==a&&((a=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var l={id:t,exports:{}};return i[t]=l,e.call(l.exports,l,l.exports),l.exports}var a=Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){n[t]=e},l.parcelRequire6f20=a),(0,a.register)("8PRdk",function(t,e){Object.defineProperty(t.exports,"default",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});var l=class{constructor({canvas:t,onSuccess:e,onCancel:l,primaryColor:i="#F56C6C",maskColor:n="rgba(128, 128, 128, 0.6)",btnTextColor:a="#FFFFFF",textTitle:o="游戏结束",successBtnText:s="重新开始",cancelBtnText:r="取消"}){Object.assign(this,{onSuccess:e,onCancel:l,primaryColor:i,maskColor:n,btnTextColor:a,textTitle:o,successBtnText:s,cancelBtnText:r,W:t.width,H:t.height,titleH:50,titleBtnSpacing:50,btnH:40,btnPadding:10,btnSpacing:40}),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.id=`mask-canvas-${new Date().getTime()}`,this.canvas.width=this.W,this.canvas.height=this.H,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",t.parentNode.appendChild(this.canvas),this.drawMask(),this.drawTitle(),this.drawButtons()}drawMask(){let{ctx:t,H:e,W:l,maskColor:i}=this;t.fillStyle=i,t.fillRect(0,0,l,e)}drawTitle(){let{ctx:t,H:e,W:l,btnH:i,textTitle:n,titleH:a,titleBtnSpacing:o,primaryColor:s}=this;t.font=`${a}px Arial`,t.textAlign="center",t.textBaseline="top",t.fillStyle=s,t.fillText(n,l/2,(e-a-o-i)/2)}drawButtons(){let{canvas:t,ctx:e,H:l,W:i,btnTextColor:n,primaryColor:a,onSuccess:o,onCancel:s,titleH:r,titleBtnSpacing:c,successBtnText:d,cancelBtnText:h,btnH:f,btnPadding:x,btnSpacing:u}=this;e.font=`${f-2*x}px Arial`,e.textBaseline="top",e.textAlign="left";let p=e.measureText(d).width+2*x,g=e.measureText(h).width+2*x,m=(l+r+c)/2-f/2,w=(i-p-g-u)/2,y=w+p+u,T=[w,w+p,m,m+f],C=[y,y+g,m,m+f];e.fillStyle=a,e.fillRect(w,m,p,f),e.fillRect(y,m,g,f),e.fillStyle=n,e.fillText(d,w+x,m+x),e.fillText(h,y+x,m+x);let b=(t,e,[l,i,n,a])=>t>=l&&t<=i&&e>=n&&e<=a;t.onclick=t=>[o,s][[T,C].findIndex(e=>b(t.offsetX,t.offsetY,e)&&(this.close(),!0))]?.()}close(){this.ctx.clearRect(0,0,this.W,this.H),this.canvas.onclick=null,document.getElementById(this.canvas.id).remove()}}});var o=a("8PRdk");const s="#E4A751",r=1,c="#000000";let d=Math.min(window.innerWidth,window.innerHeight)/18,h=16*d,f=document.createElement("canvas"),x=f.getContext("2d");f.width=f.height=h,f.style.cssText="position: absolute; inset: 0; margin: auto; box-shadow: 5px 5px 20px #888888; cursor: pointer;",document.body.appendChild(f);let u=document.createElement("button");u.innerText="悔棋",u.style.cssText="display: block; position: absolute; left: 10px; top: 10px; padding: 15px 30px; font-size: 20px; cursor: pointer;";let p=Array.from({length:15},()=>Array(15).fill(-1)),g=!0,m=0,w=[];u.onclick=t=>{if(0===w.length)return;g=!g,m--;let{x:e,y:l}=w.pop();if(p[e][l]=-1,b(e,l),0===w.length)return;let i=w.at(-1);v(i.x,i.y)},f.onclick=t=>{let[e,l]=[t.offsetX,t.offsetY].map(t=>Math.round(t/d)-1);if(p[e]?.[l]===-1){if(w.length>0){let{x:t,y:e,isBlack:l}=w.at(-1);b(t,e),C(t,e,l)}C(e,l,g),v(e,l),w.push({x:e,y:l,isBlack:g}),p[e][l]=g?1:2,k(e,l,p[e][l],p)?B(`${g?"黑":"白"}\u{68CB}\u{8D62}\u{4E86}!`):225==++m?B("游戏结束，平局！"):g=!g}};const y=()=>{x.fillStyle=s,x.fillRect(0,0,h,h);for(let t=0;t<15;t++)T(0,t,14,t),T(t,0,t,14)},T=(t,e,l,i,n=r,a=c)=>{x.lineWidth=n,x.strokeStyle=a,x.beginPath(),x.moveTo(t*d+d,e*d+d),x.lineTo(l*d+d,i*d+d),x.stroke()},C=(t,e,l)=>{x.save(),x.beginPath(),t=t*d+d,e=e*d+d,x.arc(t,e,.4*d,0,2*Math.PI),x.closePath(),x.shadowColor="rgba(0, 0, 0, 0.5)",x.shadowOffsetX=x.shadowOffsetY=.06*d,x.shadowBlur=.04*d;let i=x.createRadialGradient(t,e,0,t,e,.4*d);i.addColorStop(0,l?"#707070":"#FFFFFF"),i.addColorStop(1,l?"#000000":"#D5D8DC"),x.fillStyle=i,x.fill(),x.restore()},b=(t,e)=>{x.fillStyle=s,x.fillRect(t*d+d/2,e*d+d/2,d,d),T(t,e>0?e-.5:e,t,e<14?e+.5:e),T(t>0?t-.5:t,e,t<14?t+.5:t,e)},v=(t,e,l=.05*d)=>{x.beginPath(),x.fillStyle="#F56C6C",x.arc(t*d+d,e*d+d,l,0,2*Math.PI),x.closePath(),x.fill()},S=()=>{x.clearRect(0,0,h,h),y(),p=Array.from({length:15},()=>Array(15).fill(-1)),g=!0,m=0,w=[]},B=t=>new o.default({canvas:f,onSuccess:S,primaryColor:s,textTitle:t}),k=(t,e,l,i)=>{for(let[n,a]of[[1,0],[0,1],[1,1],[1,-1]]){let[o,s,r]=[1,0,0];for(;o<5&&i[t+n*++s]?.[e+a*s]===l;)o++;for(;o<5&&i[t-n*++r]?.[e-a*r]===l;)o++;if(5===o)return T(t+n*(s=4-r),e+a*s,t-n*r,e-a*r,5,"#F05459"),!0}return!1};window.onresize=(e=()=>{if(x.clearRect(0,0,h,h),d=Math.min(window.innerWidth,window.innerHeight)/18,h=16*d,f.width=f.height=h,y(),w.forEach(({x:t,y:e,isBlack:l})=>{C(t,e,l)}),w.length>0){let{x:t,y:e}=w.at(-1);v(t,e)}},t=null,(...l)=>{clearTimeout(t),t=setTimeout(()=>{e(...l)},512)}),window.onload=y;