let t;var e,i=globalThis,n={},l={},a=i.parcelRequire6f20;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in l){var e=l[t];delete l[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){l[t]=e},i.parcelRequire6f20=a),(0,a.register)("8PRdk",function(t,e){Object.defineProperty(t.exports,"default",{get:()=>i,set:void 0,enumerable:!0,configurable:!0});var i=class{constructor({isFullScreen:t,canvas:e,onSuccess:i,onCancel:n,primaryColor:l="#F56C6C",maskColor:a="rgba(128, 128, 128, 0.6)",btnTextColor:o="#FFFFFF",textTitle:s="游戏结束",successBtnText:r="重新开始",cancelBtnText:c="取消",titleH:d=50,titleBtnSpacing:h=50,btnH:f=40,btnPadding:u=10,btnSpacing:x=40}){Object.assign(this,{isFullScreen:!1,onSuccess:i,onCancel:n,primaryColor:l,maskColor:a,btnTextColor:o,textTitle:s,successBtnText:r,cancelBtnText:c,W:e?.width,H:e?.height,titleH:d,titleBtnSpacing:h,btnH:f,btnPadding:u,btnSpacing:x}),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.id=`mask-canvas-${new Date().getTime()}`,t?(this.canvas.width=window.innerWidth,this.W=window.innerWidth,this.canvas.height=window.innerHeight,this.H=window.innerHeight,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",document.body.appendChild(this.canvas)):(this.canvas.width=this.W,this.canvas.height=this.H,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",e.parentNode.appendChild(this.canvas)),this.drawMask(),this.drawTitle(),this.drawButtons()}drawMask(){let{ctx:t,H:e,W:i,maskColor:n}=this;t.fillStyle=n,t.fillRect(0,0,i,e)}drawTitle(){let{ctx:t,H:e,W:i,btnH:n,textTitle:l,titleH:a,titleBtnSpacing:o,primaryColor:s}=this;t.font=`${a}px Arial`,t.textAlign="center",t.textBaseline="top",t.fillStyle=s,t.fillText(l,i/2,(e-a-o-n)/2)}drawButtons(){let{canvas:t,ctx:e,H:i,W:n,btnTextColor:l,primaryColor:a,onSuccess:o,onCancel:s,titleH:r,titleBtnSpacing:c,successBtnText:d,cancelBtnText:h,btnH:f,btnPadding:u,btnSpacing:x}=this;e.font=`${f-2*u}px Arial`,e.textBaseline="top",e.textAlign="left";let p=e.measureText(d).width+2*u,g=e.measureText(h).width+2*u,w=(i+r+c)/2-f/2,m=(n-p-g-x)/2,y=m+p+x,b=[m,m+p,w,w+f],T=[y,y+g,w,w+f];e.fillStyle=a,e.fillRect(m,w,p,f),e.fillRect(y,w,g,f),e.fillStyle=l,e.fillText(d,m+u,w+u),e.fillText(h,y+u,w+u);let v=(t,e,[i,n,l,a])=>t>=i&&t<=n&&e>=l&&e<=a;t.onclick=t=>[o,s][[b,T].findIndex(e=>v(t.offsetX,t.offsetY,e)&&(this.close(),!0))]?.()}close(){this.ctx.clearRect(0,0,this.W,this.H),this.canvas.onclick=null,document.getElementById(this.canvas.id).remove()}}});var o=a("8PRdk");const s="#E4A751",r=1,c="#000000";let d=Math.min(window.innerWidth,window.innerHeight)/18,h=16*d,f=document.createElement("canvas"),u=f.getContext("2d");f.width=f.height=h,f.style.cssText="position: absolute; inset: 0; margin: auto; box-shadow: 5px 5px 20px #888888; cursor: pointer;",document.body.appendChild(f);let x=document.createElement("button");x.innerText="悔棋",x.style.cssText="display: block; position: absolute; left: 10px; top: 10px; padding: 15px 30px; font-size: 20px; cursor: pointer;";let p=Array.from({length:15},()=>Array(15).fill(-1)),g=!0,w=0,m=[];x.onclick=t=>{if(0===m.length)return;g=!g,w--;let{x:e,y:i}=m.pop();if(p[e][i]=-1,v(e,i),0===m.length)return;let n=m.at(-1);C(n.x,n.y)},f.onclick=t=>{let[e,i]=[t.offsetX,t.offsetY].map(t=>Math.round(t/d)-1);if(p[e]?.[i]===-1){if(m.length>0){let{x:t,y:e,isBlack:i}=m.at(-1);v(t,e),T(t,e,i)}T(e,i,g),C(e,i),m.push({x:e,y:i,isBlack:g}),p[e][i]=g?1:2,H(e,i,p[e][i],p)?B(`${g?"黑":"白"}\u{68CB}\u{8D62}\u{4E86}!`):225==++w?B("游戏结束，平局！"):g=!g}};const y=()=>{u.fillStyle=s,u.fillRect(0,0,h,h);for(let t=0;t<15;t++)b(0,t,14,t),b(t,0,t,14)},b=(t,e,i,n,l=r,a=c)=>{u.lineWidth=l,u.strokeStyle=a,u.beginPath(),u.moveTo(t*d+d,e*d+d),u.lineTo(i*d+d,n*d+d),u.stroke()},T=(t,e,i)=>{u.save(),u.beginPath(),t=t*d+d,e=e*d+d,u.arc(t,e,.4*d,0,2*Math.PI),u.closePath(),u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowOffsetX=u.shadowOffsetY=.06*d,u.shadowBlur=.04*d;let n=u.createRadialGradient(t,e,0,t,e,.4*d);n.addColorStop(0,i?"#707070":"#FFFFFF"),n.addColorStop(1,i?"#000000":"#D5D8DC"),u.fillStyle=n,u.fill(),u.restore()},v=(t,e)=>{u.fillStyle=s,u.fillRect(t*d+d/2,e*d+d/2,d,d),b(t,e>0?e-.5:e,t,e<14?e+.5:e),b(t>0?t-.5:t,e,t<14?t+.5:t,e)},C=(t,e,i=.05*d)=>{u.beginPath(),u.fillStyle="#F56C6C",u.arc(t*d+d,e*d+d,i,0,2*Math.PI),u.closePath(),u.fill()},S=()=>{u.clearRect(0,0,h,h),y(),p=Array.from({length:15},()=>Array(15).fill(-1)),g=!0,w=0,m=[]},B=t=>new o.default({canvas:f,onSuccess:S,primaryColor:s,textTitle:t}),H=(t,e,i,n)=>{for(let[l,a]of[[1,0],[0,1],[1,1],[1,-1]]){let[o,s,r]=[1,0,0];for(;o<5&&n[t+l*++s]?.[e+a*s]===i;)o++;for(;o<5&&n[t-l*++r]?.[e-a*r]===i;)o++;if(5===o)return b(t+l*(s=4-r),e+a*s,t-l*r,e-a*r,5,"#F05459"),!0}return!1};window.onresize=(e=()=>{if(u.clearRect(0,0,h,h),d=Math.min(window.innerWidth,window.innerHeight)/18,h=16*d,f.width=f.height=h,y(),m.forEach(({x:t,y:e,isBlack:i})=>{T(t,e,i)}),m.length>0){let{x:t,y:e}=m.at(-1);C(t,e)}},t=null,(...i)=>{clearTimeout(t),t=setTimeout(()=>{e(...i)},512)}),window.onload=y;