function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a=globalThis,n={},r={},l=a.parcelRequire6f20;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},a.parcelRequire6f20=l);var o=l.register;o("dRo73",function(t,a){e(t.exports,"register",()=>n,e=>n=e);var n,r=new Map;n=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),o("8PRdk",function(t,a){e(t.exports,"default",()=>n);var n=class{constructor({canvas:e,onSuccess:t,onCancel:a,primaryColor:n="#F56C6C",maskColor:r="rgba(128, 128, 128, 0.6)",btnTextColor:l="#FFFFFF",textTitle:o="游戏结束",successBtnText:i="重新开始",cancelBtnText:c="取消"}){Object.assign(this,{onSuccess:t,onCancel:a,primaryColor:n,maskColor:r,btnTextColor:l,textTitle:o,successBtnText:i,cancelBtnText:c,W:e.width,H:e.height,titleH:50,titleBtnSpacing:50,btnH:40,btnPadding:10,btnSpacing:40}),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.id=`mask-canvas-${new Date().getTime()}`,this.canvas.width=this.W,this.canvas.height=this.H,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",e.parentNode.appendChild(this.canvas),this.drawMask(),this.drawTitle(),this.drawButtons()}drawMask(){let{ctx:e,H:t,W:a,maskColor:n}=this;e.fillStyle=n,e.fillRect(0,0,a,t)}drawTitle(){let{ctx:e,H:t,W:a,btnH:n,textTitle:r,titleH:l,titleBtnSpacing:o,primaryColor:i}=this;e.font=`${l}px Arial`,e.textAlign="center",e.textBaseline="top",e.fillStyle=i,e.fillText(r,a/2,(t-l-o-n)/2)}drawButtons(){let{canvas:e,ctx:t,H:a,W:n,btnTextColor:r,primaryColor:l,onSuccess:o,onCancel:i,titleH:c,titleBtnSpacing:s,successBtnText:p,cancelBtnText:f,btnH:h,btnPadding:d,btnSpacing:m}=this;t.font=`${h-2*d}px Arial`,t.textBaseline="top",t.textAlign="left";let g=t.measureText(p).width+2*d,u=t.measureText(f).width+2*d,x=(a+c+s)/2-h/2,v=(n-g-u-m)/2,E=v+g+m,H=[v,v+g,x,x+h],S=[E,E+u,x,x+h];t.fillStyle=l,t.fillRect(v,x,g,h),t.fillRect(E,x,u,h),t.fillStyle=r,t.fillText(p,v+d,x+d),t.fillText(f,E+d,x+d);let A=(e,t,[a,n,r,l])=>e>=a&&e<=n&&t>=r&&t<=l;e.onclick=e=>[o,i][[H,S].findIndex(t=>A(e.offsetX,e.offsetY,t)&&(this.close(),!0))]?.()}close(){this.ctx.clearRect(0,0,this.W,this.H),this.canvas.onclick=null,document.getElementById(this.canvas.id).remove()}}}),l("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["jVlne","index.83807f8e.js","2vMQB","../../1.1c79e02e.png","jgh6g","../../2.77821e30.png","670nB","../../3.12cc791a.png","fx6Vo","../../4.70762dd7.png","knvah","../../5.83ae63bf.png","ixghU","../../6.a63dd41d.png","bdmag","../../7.ee8a74b7.jpg","5zXnb","../../8.de58636c.jpg","1mHI9","../../9.cb86a63b.png","kcZvl","../../10.ae789f3c.jpg"]'));var i={};i=new URL("../../1.1c79e02e.png",import.meta.url).toString();var c={};c=new URL("../../2.77821e30.png",import.meta.url).toString();var s={};s=new URL("../../3.12cc791a.png",import.meta.url).toString();var p={};p=new URL("../../4.70762dd7.png",import.meta.url).toString();var f={};f=new URL("../../5.83ae63bf.png",import.meta.url).toString();var h={};h=new URL("../../6.a63dd41d.png",import.meta.url).toString();var d={};d=new URL("../../7.ee8a74b7.jpg",import.meta.url).toString();var m={};m=new URL("../../8.de58636c.jpg",import.meta.url).toString();var g={};g=new URL("../../9.cb86a63b.png",import.meta.url).toString();var u={};u=new URL("../../10.ae789f3c.jpg",import.meta.url).toString();var x=l("8PRdk");const v=125,E=4*(v+20)+20,H=4*(v+20)+20,S="#C2B4A5",A=6,w=[t(i),t(c),t(s),t(p),t(f),t(h),t(d),t(m),t(g),t(u)],R=["#EEE4DA","#EDE0C8","#EDA166","#F08151","#F1654D","#F1462E","#E8C65F","#E8C34F","#E8BE40","#E8BB31","#E8B724"],_=64;let b=document.createElement("canvas"),F=b.getContext("2d");b.width=E,b.height=H,b.style.cssText="position: absolute; inset: 0; margin: auto;",document.body.appendChild(b),document.body.style.backgroundColor="#F9F7EB";let y=Array.from({length:4},()=>[,,,,].fill(-1)),T=0,C=!1,B=[],k=[],M=[],U=[],L=[],D=Array(w.length).fill(!1);document.addEventListener("keydown",async e=>{if(C)return;let t=J[e.key],a=e.key;if(!t)return;B=[],k=[],M=[],U=[];let n=t(JSON.parse(JSON.stringify(y)),a);if(n.toString()!==y.toString()){if(y=n,cancelAnimationFrame(await j(B,k,a)),M.length>0){let e=P[a];M=M.map(({index:t,pos:a,val:n})=>e(t,a,n)),U=U.map(({index:t,pos:a,val:n})=>e(t,a,n)),cancelAnimationFrame(await I(M,U,O,.3,128))}$()}});const P={ArrowUp:(e,t,a,n=0)=>({x:e,y:3-t-n,val:a}),ArrowDown:(e,t,a,n=0)=>({x:e,y:t+n,val:a}),ArrowLeft:(e,t,a,n=0)=>({x:3-t-n,y:e,val:a}),ArrowRight:(e,t,a,n=0)=>({x:t+n,y:e,val:a})},j=(e,t,a,n=_)=>new Promise(r=>{let l=null,o=null,i=[],c=null,s=P[a];t=t.map(({index:e,pos:t,val:a})=>s(e,t,a));let p=a=>{l||(l=a),F.clearRect(0,0,E,H),et(),K(y),t.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),i.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),(o=a-l)<n?(i=e.map(({index:e,pos:t,val:a,distance:r})=>s(e,t,a,r*Math.sin(o/n*Math.PI/2))),requestAnimationFrame(p)):r(c)};c=requestAnimationFrame(p)}),I=(e,t,a,n,r)=>new Promise(l=>{let o=null,i=null,c=null,s=0,p=f=>{o||(o=f),F.clearRect(0,0,E,H),et(),K(y),t.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),e.forEach(({x:e,y:t,val:a})=>Q(e-s/2,t-s/2,a,v+v*s)),(i=f-o)<r?(s=a(i/r,n),requestAnimationFrame(p)):l(c)};c=requestAnimationFrame(p)}),O=(e,t)=>Math.sin(e*Math.PI)*t,q=(e,t)=>-Math.cos(e*Math.PI/2)*(1-t),N=(e,t)=>{let a=[],n=!1,r=e.length,l=0;for(let o=r-1;o>=0;o--)-1!==e[o]&&(n&&e[o]===a[0]?(T=Math.max(++a[0],T),n=!1,M.push({index:t,val:e[o],pos:r-a.length}),U.pop()):(a.unshift(e[o]),U.push({index:t,val:e[o],pos:r-a.length}),n=!0),0==(l=r-a.length-o)?k.push({index:t,val:e[o],pos:o}):B.push({index:t,val:e[o],pos:o,distance:l}));return Array(r-a.length).fill(-1).concat(a)},W=e=>e[0].map((t,a)=>e.map(e=>e[a])),J={ArrowUp:e=>e.map((e,t)=>N(e.reverse(),t).reverse()),ArrowDown:e=>e.map((e,t)=>N(e,t)),ArrowLeft:e=>W(W(e).map((e,t)=>N(e.reverse(),t).reverse())),ArrowRight:e=>W(W(e).map((e,t)=>N(e,t)))},$=async()=>{if(V())C=!0,Y("你赢了!");else{let e=[];y.forEach((t,a)=>t.forEach((t,n)=>-1!==t&&e.push({x:a,y:n,val:t})));let{x:t,y:a}=er(y),n=.5>Math.random()?0:1;y[t][a]=n,X()&&(C=!0,Y("你输了")),await I([{x:t,y:a,val:n}],e,q,.7,256)}F.clearRect(0,0,E,H),et(),ee(y)},V=()=>T===w.length-1,X=()=>!y.some((e,t)=>e.some((a,n)=>-1===a||a===e[n+1]||a===y[t+1]?.[n])),z=async()=>{w.forEach((e,t)=>{if(D[t])return;let a=new Image;a.src=e,L[t]=a,a.onload=()=>{D[t]=!0,y.forEach((e,a)=>e.forEach((e,n)=>e===t&&Q(a,n,e)))}});let e=[];for(let t=0;t<2;t++){let{x:t,y:a}=er(y),n=.5>Math.random()?0:1;y[t][a]=n,e.push({x:t,y:a,val:n})}await I(e,[],q,.7,256),et(),ee(y)},Q=(e,t,a,n=v)=>{e=G(e),t=G(t),D[a]?(F.save(),en(e,t,n,n,6,S),F.clip(),F.drawImage(L[a],e,t,n,n),F.restore()):en(e,t,n,n,6,R[a])},Y=e=>new x.default({canvas:b,onSuccess:Z,maskColor:"rgba(143, 122, 102, 0.5)",primaryColor:"#EDA166",textTitle:e}),Z=()=>{C=!1,y=Array.from({length:4},()=>[,,,,].fill(-1)),T=0,B=[],k=[],M=[],U=[],z()},G=e=>e*(v+20)+20,K=e=>e.forEach((e,t)=>e.forEach((e,a)=>ea(t,a))),ee=e=>e.forEach((e,t)=>e.forEach((e,a)=>{ea(t,a),-1!==e&&Q(t,a,e)})),et=()=>en(0,0,E,H,6,"#AD9D8F"),ea=(e,t,a=S,n=v)=>en(G(e),G(t),n,n,6,a),en=(e,t,a,n,r=A,l)=>{F.beginPath(),F.moveTo(e+r,t),F.arcTo(e+a,t,e+a,t+n,r),F.arcTo(e+a,t+n,e,t+n,r),F.arcTo(e,t+n,e,t,r),F.arcTo(e,t,e+a,t,r),F.closePath(),l&&(F.fillStyle=l,F.fill())},er=e=>{let t=[];return e.forEach((a,n)=>a.forEach((a,r)=>-1===e[n][r]&&t.push({x:n,y:r}))),t[Math.floor(Math.random()*t.length)]};window.onload=z;