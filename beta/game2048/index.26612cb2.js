function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a=globalThis,n={},r={},i=a.parcelRequire6f20;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},a.parcelRequire6f20=i);var l=i.register;l("dRo73",function(t,a){e(t.exports,"register",()=>n,e=>n=e);var n,r=new Map;n=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),l("8PRdk",function(t,a){e(t.exports,"default",()=>n);var n=class{constructor({isFullScreen:e,canvas:t,onSuccess:a,onCancel:n,primaryColor:r="#F56C6C",maskColor:i="rgba(128, 128, 128, 0.6)",btnTextColor:l="#FFFFFF",textTitle:o="游戏结束",successBtnText:s="重新开始",cancelBtnText:c="取消",titleH:h=50,titleBtnSpacing:p=50,btnH:d=40,btnPadding:f=10,btnSpacing:g=40}){Object.assign(this,{isFullScreen:!1,onSuccess:a,onCancel:n,primaryColor:r,maskColor:i,btnTextColor:l,textTitle:o,successBtnText:s,cancelBtnText:c,W:t?.width,H:t?.height,titleH:h,titleBtnSpacing:p,btnH:d,btnPadding:f,btnSpacing:g}),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.id=`mask-canvas-${new Date().getTime()}`,e?(this.canvas.width=window.innerWidth,this.W=window.innerWidth,this.canvas.height=window.innerHeight,this.H=window.innerHeight,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",document.body.appendChild(this.canvas)):(this.canvas.width=this.W,this.canvas.height=this.H,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",t.parentNode.appendChild(this.canvas)),this.drawMask(),this.drawTitle(),this.drawButtons()}drawMask(){let{ctx:e,H:t,W:a,maskColor:n}=this;e.fillStyle=n,e.fillRect(0,0,a,t)}drawTitle(){let{ctx:e,H:t,W:a,btnH:n,textTitle:r,titleH:i,titleBtnSpacing:l,primaryColor:o}=this;e.font=`${i}px Arial`,e.textAlign="center",e.textBaseline="top",e.fillStyle=o,e.fillText(r,a/2,(t-i-l-n)/2)}drawButtons(){let{canvas:e,ctx:t,H:a,W:n,btnTextColor:r,primaryColor:i,onSuccess:l,onCancel:o,titleH:s,titleBtnSpacing:c,successBtnText:h,cancelBtnText:p,btnH:d,btnPadding:f,btnSpacing:g}=this;t.font=`${d-2*f}px Arial`,t.textBaseline="top",t.textAlign="left";let m=t.measureText(h).width+2*f,u=t.measureText(p).width+2*f,v=(a+s+c)/2-d/2,x=(n-m-u-g)/2,H=x+m+g,E=[x,x+m,v,v+d],w=[H,H+u,v,v+d];t.fillStyle=i,t.fillRect(x,v,m,d),t.fillRect(H,v,u,d),t.fillStyle=r,t.fillText(h,x+f,v+f),t.fillText(p,H+f,v+f);let S=(e,t,[a,n,r,i])=>e>=a&&e<=n&&t>=r&&t<=i;e.onclick=e=>[l,o][[E,w].findIndex(t=>S(e.offsetX,e.offsetY,t)&&(this.close(),!0))]?.()}close(){this.ctx.clearRect(0,0,this.W,this.H),this.canvas.onclick=null,document.getElementById(this.canvas.id).remove()}}}),i("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["jVlne","index.26612cb2.js","2vMQB","../../1.1c79e02e.png","jgh6g","../../2.77821e30.png","670nB","../../3.12cc791a.png","fx6Vo","../../4.70762dd7.png","knvah","../../5.83ae63bf.png","ixghU","../../6.a63dd41d.png","bdmag","../../7.ee8a74b7.jpg","5zXnb","../../8.de58636c.jpg","1mHI9","../../9.cb86a63b.png","kcZvl","../../10.ae789f3c.jpg"]'));var o={};o=new URL("../../1.1c79e02e.png",import.meta.url).toString();var s={};s=new URL("../../2.77821e30.png",import.meta.url).toString();var c={};c=new URL("../../3.12cc791a.png",import.meta.url).toString();var h={};h=new URL("../../4.70762dd7.png",import.meta.url).toString();var p={};p=new URL("../../5.83ae63bf.png",import.meta.url).toString();var d={};d=new URL("../../6.a63dd41d.png",import.meta.url).toString();var f={};f=new URL("../../7.ee8a74b7.jpg",import.meta.url).toString();var g={};g=new URL("../../8.de58636c.jpg",import.meta.url).toString();var m={};m=new URL("../../9.cb86a63b.png",import.meta.url).toString();var u={};u=new URL("../../10.ae789f3c.jpg",import.meta.url).toString();var v=i("8PRdk");const x=125,H=4*(x+20)+20,E=4*(x+20)+20,w="#C2B4A5",S=6,b=[t(o),t(s),t(c),t(h),t(p),t(d),t(f),t(g),t(m),t(u)],A=["#EEE4DA","#EDE0C8","#EDA166","#F08151","#F1654D","#F1462E","#E8C65F","#E8C34F","#E8BE40","#E8BB31","#E8B724"],R=64;let _=document.createElement("canvas"),F=_.getContext("2d");_.width=H,_.height=E,_.style.cssText="position: absolute; inset: 0; margin: auto;",document.body.appendChild(_),document.body.style.backgroundColor="#F9F7EB";let y=Array.from({length:4},()=>[,,,,].fill(-1)),T=0,C=!1,B=[],k=[],M=[],U=[],L=[],P=Array(b.length).fill(!1);document.addEventListener("keydown",async e=>{if(C)return;let t=J[e.key],a=e.key;if(!t)return;B=[],k=[],M=[],U=[];let n=t(JSON.parse(JSON.stringify(y)),a);if(n.toString()!==y.toString()){if(y=n,cancelAnimationFrame(await j(B,k,a)),M.length>0){let e=D[a];M=M.map(({index:t,pos:a,val:n})=>e(t,a,n)),U=U.map(({index:t,pos:a,val:n})=>e(t,a,n)),cancelAnimationFrame(await W(M,U,I,.3,128))}$()}});const D={ArrowUp:(e,t,a,n=0)=>({x:e,y:3-t-n,val:a}),ArrowDown:(e,t,a,n=0)=>({x:e,y:t+n,val:a}),ArrowLeft:(e,t,a,n=0)=>({x:3-t-n,y:e,val:a}),ArrowRight:(e,t,a,n=0)=>({x:t+n,y:e,val:a})},j=(e,t,a,n=R)=>new Promise(r=>{let i=null,l=null,o=[],s=null,c=D[a];t=t.map(({index:e,pos:t,val:a})=>c(e,t,a));let h=a=>{i||(i=a),F.clearRect(0,0,H,E),et(),K(y),t.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),o.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),(l=a-i)<n?(o=e.map(({index:e,pos:t,val:a,distance:r})=>c(e,t,a,r*Math.sin(l/n*Math.PI/2))),requestAnimationFrame(h)):r(s)};s=requestAnimationFrame(h)}),W=(e,t,a,n,r)=>new Promise(i=>{let l=null,o=null,s=null,c=0,h=p=>{l||(l=p),F.clearRect(0,0,H,E),et(),K(y),t.forEach(({x:e,y:t,val:a})=>Q(e,t,a)),e.forEach(({x:e,y:t,val:a})=>Q(e-c/2,t-c/2,a,x+x*c)),(o=p-l)<r?(c=a(o/r,n),requestAnimationFrame(h)):i(s)};s=requestAnimationFrame(h)}),I=(e,t)=>Math.sin(e*Math.PI)*t,O=(e,t)=>-Math.cos(e*Math.PI/2)*(1-t),q=(e,t)=>{let a=[],n=!1,r=e.length,i=0;for(let l=r-1;l>=0;l--)-1!==e[l]&&(n&&e[l]===a[0]?(T=Math.max(++a[0],T),n=!1,M.push({index:t,val:e[l],pos:r-a.length}),U.pop()):(a.unshift(e[l]),U.push({index:t,val:e[l],pos:r-a.length}),n=!0),0==(i=r-a.length-l)?k.push({index:t,val:e[l],pos:l}):B.push({index:t,val:e[l],pos:l,distance:i}));return Array(r-a.length).fill(-1).concat(a)},N=e=>e[0].map((t,a)=>e.map(e=>e[a])),J={ArrowUp:e=>e.map((e,t)=>q(e.reverse(),t).reverse()),ArrowDown:e=>e.map((e,t)=>q(e,t)),ArrowLeft:e=>N(N(e).map((e,t)=>q(e.reverse(),t).reverse())),ArrowRight:e=>N(N(e).map((e,t)=>q(e,t)))},$=async()=>{if(V())C=!0,Y("你赢了!");else{let e=[];y.forEach((t,a)=>t.forEach((t,n)=>-1!==t&&e.push({x:a,y:n,val:t})));let{x:t,y:a}=er(y),n=.5>Math.random()?0:1;y[t][a]=n,X()&&(C=!0,Y("你输了")),await W([{x:t,y:a,val:n}],e,O,.7,256)}F.clearRect(0,0,H,E),et(),ee(y)},V=()=>T===b.length-1,X=()=>!y.some((e,t)=>e.some((a,n)=>-1===a||a===e[n+1]||a===y[t+1]?.[n])),z=async()=>{b.forEach((e,t)=>{if(P[t])return;let a=new Image;a.src=e,L[t]=a,a.onload=()=>{P[t]=!0,y.forEach((e,a)=>e.forEach((e,n)=>e===t&&Q(a,n,e)))}});let e=[];for(let t=0;t<2;t++){let{x:t,y:a}=er(y),n=.5>Math.random()?0:1;y[t][a]=n,e.push({x:t,y:a,val:n})}await W(e,[],O,.7,256),et(),ee(y)},Q=(e,t,a,n=x)=>{e=G(e),t=G(t),P[a]?(F.save(),en(e,t,n,n,6,w),F.clip(),F.drawImage(L[a],e,t,n,n),F.restore()):en(e,t,n,n,6,A[a])},Y=e=>new v.default({canvas:_,onSuccess:Z,maskColor:"rgba(143, 122, 102, 0.5)",primaryColor:"#EDA166",textTitle:e}),Z=()=>{C=!1,y=Array.from({length:4},()=>[,,,,].fill(-1)),T=0,B=[],k=[],M=[],U=[],z()},G=e=>e*(x+20)+20,K=e=>e.forEach((e,t)=>e.forEach((e,a)=>ea(t,a))),ee=e=>e.forEach((e,t)=>e.forEach((e,a)=>{ea(t,a),-1!==e&&Q(t,a,e)})),et=()=>en(0,0,H,E,6,"#AD9D8F"),ea=(e,t,a=w,n=x)=>en(G(e),G(t),n,n,6,a),en=(e,t,a,n,r=S,i)=>{F.beginPath(),F.moveTo(e+r,t),F.arcTo(e+a,t,e+a,t+n,r),F.arcTo(e+a,t+n,e,t+n,r),F.arcTo(e,t+n,e,t,r),F.arcTo(e,t,e+a,t,r),F.closePath(),i&&(F.fillStyle=i,F.fill())},er=e=>{let t=[];return e.forEach((a,n)=>a.forEach((a,r)=>-1===e[n][r]&&t.push({x:n,y:r}))),t[Math.floor(Math.random()*t.length)]};window.onload=z;