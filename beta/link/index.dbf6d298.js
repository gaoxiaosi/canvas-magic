let t;function e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function n(t){return t&&t.__esModule?t.default:t}var r=globalThis,i={},a={},o=r.parcelRequire6f20;null==o&&((o=function(t){if(t in i)return i[t].exports;if(t in a){var e=a[t];delete a[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},r.parcelRequire6f20=o);var l=o.register;l("dRo73",function(t,n){e(t.exports,"register",()=>r,t=>r=t);var r,i=new Map;r=function(t,e){for(var n=0;n<e.length-1;n+=2)i.set(e[n],{baseUrl:t,path:e[n+1]})}}),l("8PRdk",function(t,n){e(t.exports,"default",()=>r);var r=class{constructor({isFullScreen:t,canvas:e,onSuccess:n,onCancel:r,primaryColor:i="#F56C6C",maskColor:a="rgba(128, 128, 128, 0.6)",btnTextColor:o="#FFFFFF",textTitle:l="游戏结束",successBtnText:c="重新开始",cancelBtnText:s="取消",titleH:d=50,titleBtnSpacing:f=50,btnH:p=40,btnPadding:g=10,btnSpacing:H=40}){Object.assign(this,{isFullScreen:!1,onSuccess:n,onCancel:r,primaryColor:i,maskColor:a,btnTextColor:o,textTitle:l,successBtnText:c,cancelBtnText:s,W:e?.width,H:e?.height,titleH:d,titleBtnSpacing:f,btnH:p,btnPadding:g,btnSpacing:H}),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.id=`mask-canvas-${new Date().getTime()}`,t?(this.canvas.width=window.innerWidth,this.W=window.innerWidth,this.canvas.height=window.innerHeight,this.H=window.innerHeight,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",document.body.appendChild(this.canvas)):(this.canvas.width=this.W,this.canvas.height=this.H,this.canvas.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",e.parentNode.appendChild(this.canvas)),this.drawMask(),this.drawTitle(),this.drawButtons()}drawMask(){let{ctx:t,H:e,W:n,maskColor:r}=this;t.fillStyle=r,t.fillRect(0,0,n,e)}drawTitle(){let{ctx:t,H:e,W:n,btnH:r,textTitle:i,titleH:a,titleBtnSpacing:o,primaryColor:l}=this;t.font=`${a}px Arial`,t.textAlign="center",t.textBaseline="top",t.fillStyle=l,t.fillText(i,n/2,(e-a-o-r)/2)}drawButtons(){let{canvas:t,ctx:e,H:n,W:r,btnTextColor:i,primaryColor:a,onSuccess:o,onCancel:l,titleH:c,titleBtnSpacing:s,successBtnText:d,cancelBtnText:f,btnH:p,btnPadding:g,btnSpacing:H}=this;e.font=`${p-2*g}px Arial`,e.textBaseline="top",e.textAlign="left";let u=e.measureText(d).width+2*g,_=e.measureText(f).width+2*g,h=(n+c+s)/2-p/2,S=(r-u-_-H)/2,R=S+u+H,m=[S,S+u,h,h+p],x=[R,R+_,h,h+p];e.fillStyle=a,e.fillRect(S,h,u,p),e.fillRect(R,h,_,p),e.fillStyle=i,e.fillText(d,S+g,h+g),e.fillText(f,R+g,h+g);let b=(t,e,[n,r,i,a])=>t>=n&&t<=r&&e>=i&&e<=a;t.onclick=t=>[o,l][[m,x].findIndex(e=>b(t.offsetX,t.offsetY,e)&&(this.close(),!0))]?.()}close(){this.ctx.clearRect(0,0,this.W,this.H),this.canvas.onclick=null,document.getElementById(this.canvas.id).remove()}}}),o("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["2azQZ","index.dbf6d298.js","iJRo9","../../1.6a13da6b.jpg","ipDpp","../../2.79f62ab7.jpg","k9cm9","../../3.befba8c5.jpg","bnZNv","../../4.cd8a4663.jpg","8Obk0","../../5.aabd2e3f.jpg","8whIW","../../6.f8bd7b96.jpg","2ypfC","../../7.ee282bc1.jpg","e0mL4","../../8.dc49f5aa.jpg","9bUDr","../../9.6490605c.jpg","jaKF2","../../10.5ec68f07.jpg","aH5ub","../../11.ac78ea64.jpg","2A4rN","../../12.cf884c2a.jpg","dHmkK","../../13.19815d43.jpg","1rBeV","../../14.f363d0c4.jpg","1mvLs","../../15.13cdb960.jpg","kzU9y","../../16.df82ff1c.jpg","hd8t2","../../17.77e0b12b.jpg","tcdFn","../../18.b0432aad.jpg","7GaMD","../../19.372b5444.jpg","anvwP","../../20.a0d7bd23.jpg"]'));var c=o("8PRdk"),s={};s=new URL("../../1.6a13da6b.jpg",import.meta.url).toString();var d={};d=new URL("../../2.79f62ab7.jpg",import.meta.url).toString();var f={};f=new URL("../../3.befba8c5.jpg",import.meta.url).toString();var p={};p=new URL("../../4.cd8a4663.jpg",import.meta.url).toString();var g={};g=new URL("../../5.aabd2e3f.jpg",import.meta.url).toString();var H={};H=new URL("../../6.f8bd7b96.jpg",import.meta.url).toString();var u={};u=new URL("../../7.ee282bc1.jpg",import.meta.url).toString();var _={};_=new URL("../../8.dc49f5aa.jpg",import.meta.url).toString();var h={};h=new URL("../../9.6490605c.jpg",import.meta.url).toString();var S={};S=new URL("../../10.5ec68f07.jpg",import.meta.url).toString();var R={};R=new URL("../../11.ac78ea64.jpg",import.meta.url).toString();var m={};m=new URL("../../12.cf884c2a.jpg",import.meta.url).toString();var x={};x=new URL("../../13.19815d43.jpg",import.meta.url).toString();var b={};b=new URL("../../14.f363d0c4.jpg",import.meta.url).toString();var w={};w=new URL("../../15.13cdb960.jpg",import.meta.url).toString();var y={};y=new URL("../../16.df82ff1c.jpg",import.meta.url).toString();var E={};E=new URL("../../17.77e0b12b.jpg",import.meta.url).toString();var F={};F=new URL("../../18.b0432aad.jpg",import.meta.url).toString();var A={};A=new URL("../../19.372b5444.jpg",import.meta.url).toString();var v={};v=new URL("../../20.a0d7bd23.jpg",import.meta.url).toString();const C=window.devicePixelRatio||1,j=window.innerWidth<768?60:100,T=j/12,U=j/12,L=j/2+T,O=10/C,B=Math.floor((window.innerWidth-2*L-O)/(j+O)),k=(t=Math.floor((window.innerHeight-2*L-O)/(j+O)),B%2&&t%2?t-1:t),W=B*(j+O)+O+2*L,N=k*(j+O)+O+2*L,D=[n(s),n(d),n(f),n(p),n(g),n(H),n(u),n(_),n(h),n(S),n(R),n(m),n(x),n(b),n(w),n(y),n(E),n(F),n(A),n(v)],P=["#409EFF","#67C23A","#E6A23C","#F56C6C","#B37FEB","#FF85C0","#36CFC9"],I="#00AEEC",M="#00AEEC";BG_COLOR="#F8BBD0",CONNECT_DURATION=369,SHOW_TIPS_DURATION=1e4,MASK_COLOR="#F8BBD0";let G=document.createElement("canvas"),K=G.getContext("2d");G.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;-webkit-user-select: none; -moz-user-select: none; ms-user-select: none; user-select: none;",G.width=W*C,G.height=N*C,G.style.width=W+"px",G.style.height=N+"px",document.body.appendChild(G),K.scale(C,C),document.body.style.backgroundColor=BG_COLOR;let Y=Array.from({length:B+2},()=>Array(k+2).fill(-1)),z={x:-1,y:-1},X=[],$=[],q=0,J=null,Z=!1,Q=!1,V=0,tt=[],te=Array(D.length).fill(!1);document.addEventListener("keydown",t=>"A"===t.key.toUpperCase()&&!Z&&tn());const tn=async()=>{Z=!0;let{x:t,y:e}=$[0],{x:n,y:r}=$[$.length-1];td(t,e),td(n,r),tS($),Y[t][e]=-1,Y[n][r]=-1,q++,await tr(CONNECT_DURATION),tR(),Q?ta():tn()};G.onclick=async t=>{let[e,n]=[t.offsetX,t.offsetY].map(t=>Math.ceil((t-L)/(j+O)));if(t.offsetX-(e-1)*(j+O)-L<O||t.offsetY-(n-1)*(j+O)-L<O||-1===Y[e][n])return;td(e,n);let r=z.x,i=z.y;if(-1===r&&-1===i)z={x:e,y:n};else{if(r===e&&i===n){z={x:-1,y:-1},tf(e,n);return}(X=tc(z,{x:e,y:n}))?(tS(X),Y[r][i]=-1,Y[e][n]=-1,z={x:-1,y:-1},q++,await tr(CONNECT_DURATION),tR(),Q&&ta()):(tf(r,i),z={x:e,y:n})}};const tr=t=>new Promise(e=>setTimeout(e,t)),ti=()=>2*q==k*B&&(Q=!0),ta=()=>new c.default({onSuccess:tm,isFullScreen:!0,textTitle:"You Win!",successBtnText:"Restart",cancelBtnText:"Cancel",primaryColor:"#00AEEC",maskColor:MASK_COLOR,titleH:.15*window.innerWidth,titleBtnSpacing:.15*window.innerHeight,btnH:.08*window.innerWidth,btnPadding:.02*window.innerWidth,btnSpacing:.05*window.innerWidth}),to=(t,e)=>{let{x:n,y:r}=t,{x:i,y:a}=e;return n===i?(r>a&&([r,a]=[a,r]),Y[n].slice(r+1,a).every(t=>-1===t)):r===a&&(n>i&&([n,i]=[i,n]),Y.slice(n+1,i).every(t=>-1===t[r]))},tl=(t,e)=>{let{x:n,y:r}=t,{x:i,y:a}=e;for(let[o,l]of[[1,0],[-1,0],[0,1],[0,-1]]){let c=0,s=n,d=r,f={},p={};for(;Y[s=n+o*++c]?.[d=r+l*c]===-1;){if(f={x:s,y:d},(p=0===o?{x:i,y:d}:{x:s,y:a}).x===i&&p.y===a&&to(f,e))return[t,f,e];if(-1===Y[p.x][p.y]&&to(f,p)&&to(p,e))return[t,f,p,e]}}return!1},tc=(t,e)=>Y[t.x][t.y]===Y[e.x][e.y]&&(to(t,e)?[t,e]:tl(t,e)),ts=()=>{if(V++>1e3)return alert("未知错误，请重新刷新页面"),!0;if(Q)return!1;let t={};for(let e of(Y.forEach((e,n)=>e.forEach((e,r)=>-1!==e&&t[e]?t[e].push({x:n,y:r}):t[e]=[{x:n,y:r}])),Object.values(t)))for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if($=tc(e[t],e[n]))return!0;return!1},td=(t,e,n=I)=>{K.strokeStyle=n,K.lineWidth=U,K.strokeRect(tg(t)+U/2,tg(e)+U/2,j-U,j-U)},tf=(t,e)=>th(t,e,Y[t][e]),tp=()=>{K.fillStyle=BG_COLOR,K.fillRect(L,L,W-2*L,N-2*L)},tg=t=>(t-1)*(j+O)+O+L,tH=t=>t.sort(()=>Math.random()-.5),tu=()=>{let t=[],e=0;for(let n=0;n<k*B/2;n++)e=n%D.length,t.push(e,e);let n=tH(t);for(let t=1;t<B+1;t++)for(let e=1;e<k+1;e++)Y[t][e]=n.pop()},t_=()=>{console.log("需要打乱数据");let t=[];for(let e=1;e<B+1;e++)for(let n=1;n<k+1;n++)t.push(Y[e][n]);let e=tH(t);for(let t=1;t<B+1;t++)for(let n=1;n<k+1;n++)Y[t][n]=e.pop()},th=(t,e,n,r=j)=>{t=tg(t),e=tg(e),te[n]?(K.strokeStyle=BG_COLOR,K.strokeRect(t,e,r,r),K.drawImage(tt[n],t,e,r,r)):(K.fillStyle=P[n%P.length],K.fillRect(t,e,r,r))},tS=(t,e=T,n=M)=>{let r=(t=t.map(t=>({...t,ox:.5,oy:.5}))).length;t[0].x===t[1].x?t[0].oy=+(t[0].y<t[1].y):t[0].ox=+(t[0].x<t[1].x),t[r-1].x===t[r-2].x?t[r-1].oy=+(t[r-1].y<t[r-2].y):t[r-1].ox=+(t[r-1].x<t[r-2].x),t=t.map(({x:t,y:e,ox:n,oy:r})=>({x:tg(t)+j*n,y:tg(e)+j*r})),K.lineWidth=e,K.strokeStyle=n,K.beginPath();let{x:i,y:a}=t.shift();K.moveTo(i,a),t.forEach(({x:t,y:e})=>K.lineTo(t,e)),K.stroke()},tR=()=>{if(clearTimeout(J),!ti()){for(V=0;!ts();)t_();J=setTimeout(()=>{let{x:t,y:e}=$[0],{x:n,y:r}=$[$.length-1];td(t,e,"red"),td(n,r,"red")},SHOW_TIPS_DURATION)}K.clearRect(0,0,W,N),tp(),Y.forEach((t,e)=>t.forEach((t,n)=>-1!==t&&th(e,n,t)))},tm=()=>{z={x:-1,y:-1},q=0,J=null,Z=!1,Q=!1,V=0,tu(),tR()},tx=async()=>{tu(),D.forEach((t,e)=>{if(te[e])return;let n=new Image;n.src=t,tt[e]=n,n.onload=()=>{te[e]=!0,Y.forEach((t,e)=>t.forEach((t,n)=>-1!==t&&th(e,n,t)))}}),tR()};window.onload=tx;