function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,r={},o={},a=t.parcelRequire6f20;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},t.parcelRequire6f20=a),(0,a.register)("dRo73",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,o=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)o.set(t[r],{baseUrl:e,path:t[r+1]})}}),a("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["2azQZ","index.12fc5492.js","iJRo9","../../1.6a13da6b.jpg","ipDpp","../../2.79f62ab7.jpg","k9cm9","../../3.befba8c5.jpg","bnZNv","../../4.cd8a4663.jpg","8Obk0","../../5.aabd2e3f.jpg","8whIW","../../6.f8bd7b96.jpg","2ypfC","../../7.ee282bc1.jpg","e0mL4","../../8.dc49f5aa.jpg","9bUDr","../../9.6490605c.jpg","jaKF2","../../10.5ec68f07.jpg","aH5ub","../../11.ac78ea64.jpg","2A4rN","../../12.cf884c2a.jpg","dHmkK","../../13.19815d43.jpg","1rBeV","../../14.f363d0c4.jpg","1mvLs","../../15.13cdb960.jpg","kzU9y","../../16.df82ff1c.jpg","hd8t2","../../17.77e0b12b.jpg","tcdFn","../../18.b0432aad.jpg","7GaMD","../../19.372b5444.jpg","anvwP","../../20.a0d7bd23.jpg"]'));var n={};n=new URL("../../1.6a13da6b.jpg",import.meta.url).toString();var i={};i=new URL("../../2.79f62ab7.jpg",import.meta.url).toString();var l={};l=new URL("../../3.befba8c5.jpg",import.meta.url).toString();var c={};c=new URL("../../4.cd8a4663.jpg",import.meta.url).toString();var f={};f=new URL("../../5.aabd2e3f.jpg",import.meta.url).toString();var p={};p=new URL("../../6.f8bd7b96.jpg",import.meta.url).toString();var g={};g=new URL("../../7.ee282bc1.jpg",import.meta.url).toString();var _={};_=new URL("../../8.dc49f5aa.jpg",import.meta.url).toString();var d={};d=new URL("../../9.6490605c.jpg",import.meta.url).toString();var H={};H=new URL("../../10.5ec68f07.jpg",import.meta.url).toString();var s={};s=new URL("../../11.ac78ea64.jpg",import.meta.url).toString();var y={};y=new URL("../../12.cf884c2a.jpg",import.meta.url).toString();var S={};S=new URL("../../13.19815d43.jpg",import.meta.url).toString();var R={};R=new URL("../../14.f363d0c4.jpg",import.meta.url).toString();var m={};m=new URL("../../15.13cdb960.jpg",import.meta.url).toString();var u={};u=new URL("../../16.df82ff1c.jpg",import.meta.url).toString();var x={};x=new URL("../../17.77e0b12b.jpg",import.meta.url).toString();var b={};b=new URL("../../18.b0432aad.jpg",import.meta.url).toString();var E={};E=new URL("../../19.372b5444.jpg",import.meta.url).toString();var A={};A=new URL("../../20.a0d7bd23.jpg",import.meta.url).toString();const F=100,j=F/2+10,h=Math.floor((window.innerHeight-2*j-10)/(F+10)),v=Math.floor((window.innerWidth-2*j-10)/(F+10))-(h%2==1),w=v*(F+10)+10+2*j,L=h*(F+10)+10+2*j,U=[e(n),e(i),e(l),e(c),e(f),e(p),e(g),e(_),e(d),e(H),e(s),e(y),e(S),e(R),e(m),e(u),e(x),e(b),e(E),e(A)],k=["#409EFF","#67C23A","#E6A23C","#F56C6C","#b37feb","#ff85c0","#36cfc9"],O="#00aeec",C="#00aeec",N=w/4,T="#F8BBD0";let J=document.createElement("canvas"),M=J.getContext("2d");J.width=w,J.height=L,J.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",document.body.appendChild(J),document.body.style.backgroundColor="rgba(0, 174, 236, 0.5)";let D=Array.from({length:v+2},()=>Array(h+2).fill(-1)),I={x:-1,y:-1},W={x:-1,y:-1},B={x:-1,y:-1},P={x:-1,y:-1},q={x:-1,y:-1},z={x:-1,y:-1},K=!1,X=0,Y=null,Z=null,G=!1,Q=[],V=Array(U.length).fill(!1);document.addEventListener("keydown",e=>"A"===e.key.toUpperCase()&&null===Z&&(Z=setInterval(()=>$(),1e3))),document.addEventListener("touchstart",e=>console.log("开始长按")),document.addEventListener("touchend",e=>Z=setInterval(()=>$(),1e3));const $=async()=>{I=q,P=z;let{x:e,y:t}=I,{x:r,y:o}=P;ei(e,t),ei(r,o),es(),D[e][t]=-1,D[r][o]=-1,X++,await ee(512),ey(),G&&(clearInterval(Z),console.log(D),alert("你赢了"))};J.onclick=async e=>{let[t,r]=[e.offsetX,e.offsetY].map(e=>Math.ceil((e-j)/(F+10)));if(!(e.offsetX-(t-1)*(F+10)-j<10)&&!(e.offsetY-(r-1)*(F+10)-j<10)&&-1!==D[t][r]){if(K){if(K=!1,t===I.x&&r===I.y){el(t,r),eH(t,r,D[t][r]);return}P={x:t,y:r},ea(I,P)?(ei(P.x,P.y),es(),D[I.x][I.y]=-1,D[P.x][P.y]=-1,await ee(256),ey(),X++,G&&alert("你赢了")):(el(I.x,I.y),eH(I.x,I.y,D[I.x][I.y]),I={x:t,y:r},ei(t,r))}else I={x:t,y:r},K=!0,ei(t,r)}};const ee=e=>new Promise(t=>setTimeout(t,e)),et=()=>2*X==h*v&&(G=!0),er=(e,t)=>{let{x:r,y:o}=e,{x:a,y:n}=t;return r===a?(o>n&&([o,n]=[n,o]),D[r].slice(o+1,n).every(e=>-1===e)):o===n&&(r>a&&([r,a]=[a,r]),D.slice(r+1,a).every(e=>-1===e[o]))},eo=(e,t)=>{let{x:r,y:o}=e,{x:a,y:n}=t;for(let[e,i]of[[1,0],[-1,0],[0,1],[0,-1]]){let l=0,c=r,f=o;for(;D[c=r+e*++l]?.[f=o+i*l]===-1;)if(W={x:c,y:f},B=0===e?{x:a,y:f}:{x:c,y:n},JSON.stringify(B)===JSON.stringify(t)&&er(W,t)||-1===D[B.x][B.y]&&er(W,B)&&er(B,t))return!0}return!1},ea=(e,t)=>(W=e,B=t,D[e.x][e.y]===D[t.x][t.y]&&(!!er(e,t)||eo(e,t))),en=()=>{if(G)return!1;let e={};for(let t of(D.forEach((t,r)=>t.forEach((t,o)=>{-1!==t&&(e[t]?e[t].push({x:r,y:o}):e[t]=[{x:r,y:o}])})),Object.values(e)))for(let e=0;e<t.length;e++)for(let r=e+1;r<t.length;r++)if(ea(t[e],t[r]))return q=t[e],z=t[r],!0;return!1},ei=(e,t,r=O)=>{M.strokeStyle=r,M.lineWidth=5,M.strokeRect(ep(e),ep(t),F,F)},el=(e,t)=>{M.strokeStyle=T,M.lineWidth=10,M.strokeRect(ep(e),ep(t),F,F)},ec=()=>{M.fillStyle=T,M.fillRect(j,j,w-2*j,L-2*j)},ef=()=>{M.font=`${N}px serif`,M.fillStyle="#00AEEC",M.textBaseline="middle",M.textAlign="center",M.fillText("bilibili",w/2,L/2)},ep=e=>(e-1)*(F+10)+10+j,eg=e=>e.sort(()=>Math.random()-.5),e_=()=>{let e=[],t=0;for(let r=0;r<h*v/2;r++)t=r%U.length,e.push(t,t);let r=eg(e);for(let e=1;e<v+1;e++)for(let t=1;t<h+1;t++)D[e][t]=r.pop()},ed=()=>{console.log("需要打乱数据");let e=[];for(let t=1;t<v+1;t++)for(let r=1;r<h+1;r++)e.push(D[t][r]);let t=eg(e);for(let e=1;e<v+1;e++)for(let r=1;r<h+1;r++)D[e][r]=t.pop()},eH=(e,t,r,o=F)=>{e=ep(e),t=ep(t),M.strokeStyle=T,M.lineWidth=10,M.strokeRect(e-5,t-5,o+10,o+10),V[r]?M.drawImage(Q[r],e,t,o,o):(M.fillStyle=k[r%k.length],M.fillRect(e,t,o,o))},es=(e=[I,W,B,P],t=5,r=C)=>{JSON.stringify(B)===JSON.stringify(P)&&e.splice(2,1),JSON.stringify(I)===JSON.stringify(W)&&e.splice(1,1);let o=(e=e.map(e=>({...e,ox:.5,oy:.5}))).length;e[0].x===e[1].x?e[0].oy=+(e[0].y<e[1].y):e[0].ox=+(e[0].x<e[1].x),e[o-1].x===e[o-2].x&&(e[o-1].oy=+(e[o-1].y<e[o-2].y)),e[o-1].y===e[o-2].y&&(e[o-1].ox=+(e[o-1].x<e[o-2].x)),e=e.map(({x:e,y:t,ox:r,oy:o})=>({x:ep(e)+F*r,y:ep(t)+F*o})),M.lineWidth=t,M.strokeStyle=r,M.beginPath();let{x:a,y:n}=e.shift();M.moveTo(a,n),e.forEach(({x:e,y:t})=>M.lineTo(e,t)),M.stroke()},ey=()=>{if(clearTimeout(Y),!et()){for(;!en();)ed();Y=setTimeout(()=>{ei(q.x,q.y,"red"),ei(z.x,z.y,"red")},5e3)}M.clearRect(0,0,w,L),ec(),ef(),D.forEach((e,t)=>e.forEach((e,r)=>-1!==e&&eH(t,r,e)))},eS=async()=>{e_(),U.forEach((e,t)=>{if(V[t])return;let r=new Image;r.src=e,Q[t]=r,r.onload=()=>{V[t]=!0,D.forEach((e,t)=>e.forEach((e,r)=>-1!==e&&eH(t,r,e)))}}),ey()};window.onload=eS;