let e;function t(e){return e&&e.__esModule?e.default:e}var r=globalThis,o={},a={},n=r.parcelRequire6f20;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},r.parcelRequire6f20=n),(0,n.register)("dRo73",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,o=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)o.set(t[r],{baseUrl:e,path:t[r+1]})}}),n("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["2azQZ","index.a7e69cb4.js","iJRo9","../../1.6a13da6b.jpg","ipDpp","../../2.79f62ab7.jpg","k9cm9","../../3.befba8c5.jpg","bnZNv","../../4.cd8a4663.jpg","8Obk0","../../5.aabd2e3f.jpg","8whIW","../../6.f8bd7b96.jpg","2ypfC","../../7.ee282bc1.jpg","e0mL4","../../8.dc49f5aa.jpg","9bUDr","../../9.6490605c.jpg","jaKF2","../../10.5ec68f07.jpg","aH5ub","../../11.ac78ea64.jpg","2A4rN","../../12.cf884c2a.jpg","dHmkK","../../13.19815d43.jpg","1rBeV","../../14.f363d0c4.jpg","1mvLs","../../15.13cdb960.jpg","kzU9y","../../16.df82ff1c.jpg","hd8t2","../../17.77e0b12b.jpg","tcdFn","../../18.b0432aad.jpg","7GaMD","../../19.372b5444.jpg","anvwP","../../20.a0d7bd23.jpg"]'));var i={};i=new URL("../../1.6a13da6b.jpg",import.meta.url).toString();var l={};l=new URL("../../2.79f62ab7.jpg",import.meta.url).toString();var c={};c=new URL("../../3.befba8c5.jpg",import.meta.url).toString();var f={};f=new URL("../../4.cd8a4663.jpg",import.meta.url).toString();var p={};p=new URL("../../5.aabd2e3f.jpg",import.meta.url).toString();var g={};g=new URL("../../6.f8bd7b96.jpg",import.meta.url).toString();var d={};d=new URL("../../7.ee282bc1.jpg",import.meta.url).toString();var _={};_=new URL("../../8.dc49f5aa.jpg",import.meta.url).toString();var H={};H=new URL("../../9.6490605c.jpg",import.meta.url).toString();var s={};s=new URL("../../10.5ec68f07.jpg",import.meta.url).toString();var y={};y=new URL("../../11.ac78ea64.jpg",import.meta.url).toString();var S={};S=new URL("../../12.cf884c2a.jpg",import.meta.url).toString();var R={};R=new URL("../../13.19815d43.jpg",import.meta.url).toString();var m={};m=new URL("../../14.f363d0c4.jpg",import.meta.url).toString();var u={};u=new URL("../../15.13cdb960.jpg",import.meta.url).toString();var x={};x=new URL("../../16.df82ff1c.jpg",import.meta.url).toString();var b={};b=new URL("../../17.77e0b12b.jpg",import.meta.url).toString();var E={};E=new URL("../../18.b0432aad.jpg",import.meta.url).toString();var A={};A=new URL("../../19.372b5444.jpg",import.meta.url).toString();var F={};F=new URL("../../20.a0d7bd23.jpg",import.meta.url).toString();const h=window.innerWidth<500?50:100,j=h/2+10,w=window.innerWidth<500?5:10,v=Math.floor((window.innerHeight-2*j-w)/(h+w)),L=(e=Math.floor((window.innerWidth-2*j-w)/(h+w)),v%2?e-1:e),U=L*(h+w)+w+2*j,k=v*(h+w)+w+2*j,O=[t(i),t(l),t(c),t(f),t(p),t(g),t(d),t(_),t(H),t(s),t(y),t(S),t(R),t(m),t(u),t(x),t(b),t(E),t(A),t(F)],C=["#409EFF","#67C23A","#E6A23C","#F56C6C","#b37feb","#ff85c0","#36cfc9"],N="#00aeec",T="#00aeec",J=U/4,M="#F8BBD0";let W=document.createElement("canvas"),D=W.getContext("2d");W.width=U,W.height=k,W.style.cssText="position: absolute; inset: 0; margin: auto; cursor: pointer;",document.body.appendChild(W),document.body.style.backgroundColor=M;let I=Array.from({length:L+2},()=>Array(v+2).fill(-1)),B={x:-1,y:-1},P={x:-1,y:-1},q={x:-1,y:-1},z={x:-1,y:-1},K={x:-1,y:-1},X={x:-1,y:-1},Y=!1,Z=0,G=null,Q=null,V=null,$=!1,ee=[],et=Array(O.length).fill(!1);document.addEventListener("keydown",e=>"A"===e.key.toUpperCase()&&null===Q&&(Q=setInterval(()=>er(),1e3))),document.addEventListener("touchstart",e=>V=setTimeout(()=>Q=setInterval(()=>er(),1e3),3e3)),document.addEventListener("touchend",e=>clearTimeout(V));const er=async()=>{B=K,z=X;let{x:e,y:t}=B,{x:r,y:o}=z;ef(e,t),ef(r,o),eR(),I[e][t]=-1,I[r][o]=-1,Z++,await eo(512),em(),$&&(clearInterval(Q),console.log(I),alert("你赢了"))};W.onclick=async e=>{let[t,r]=[e.offsetX,e.offsetY].map(e=>Math.ceil((e-j)/(h+w)));if(!(e.offsetX-(t-1)*(h+w)-j<w)&&!(e.offsetY-(r-1)*(h+w)-j<w)&&-1!==I[t][r]){if(Y){if(Y=!1,t===B.x&&r===B.y){ep(t,r),eS(t,r,I[t][r]);return}z={x:t,y:r},el(B,z)?(ef(z.x,z.y),eR(),I[B.x][B.y]=-1,I[z.x][z.y]=-1,await eo(256),em(),Z++,$&&alert("你赢了")):(ep(B.x,B.y),eS(B.x,B.y,I[B.x][B.y]),B={x:t,y:r},ef(t,r))}else B={x:t,y:r},Y=!0,ef(t,r)}};const eo=e=>new Promise(t=>setTimeout(t,e)),ea=()=>2*Z==v*L&&($=!0),en=(e,t)=>{let{x:r,y:o}=e,{x:a,y:n}=t;return r===a?(o>n&&([o,n]=[n,o]),I[r].slice(o+1,n).every(e=>-1===e)):o===n&&(r>a&&([r,a]=[a,r]),I.slice(r+1,a).every(e=>-1===e[o]))},ei=(e,t)=>{let{x:r,y:o}=e,{x:a,y:n}=t;for(let[e,i]of[[1,0],[-1,0],[0,1],[0,-1]]){let l=0,c=r,f=o;for(;I[c=r+e*++l]?.[f=o+i*l]===-1;)if(P={x:c,y:f},q=0===e?{x:a,y:f}:{x:c,y:n},JSON.stringify(q)===JSON.stringify(t)&&en(P,t)||-1===I[q.x][q.y]&&en(P,q)&&en(q,t))return!0}return!1},el=(e,t)=>(P=e,q=t,I[e.x][e.y]===I[t.x][t.y]&&(!!en(e,t)||ei(e,t))),ec=()=>{if($)return!1;let e={};for(let t of(I.forEach((t,r)=>t.forEach((t,o)=>{-1!==t&&(e[t]?e[t].push({x:r,y:o}):e[t]=[{x:r,y:o}])})),Object.values(e)))for(let e=0;e<t.length;e++)for(let r=e+1;r<t.length;r++)if(el(t[e],t[r]))return K=t[e],X=t[r],!0;return!1},ef=(e,t,r=N)=>{D.strokeStyle=r,D.lineWidth=5,D.strokeRect(e_(e),e_(t),h,h)},ep=(e,t)=>{D.strokeStyle=M,D.lineWidth=10,D.strokeRect(e_(e),e_(t),h,h)},eg=()=>{D.fillStyle=M,D.fillRect(j,j,U-2*j,k-2*j)},ed=()=>{D.font=`${J}px serif`,D.fillStyle="#00AEEC",D.textBaseline="middle",D.textAlign="center",D.fillText("bilibili",U/2,k/2)},e_=e=>(e-1)*(h+w)+w+j,eH=e=>e.sort(()=>Math.random()-.5),es=()=>{let e=[],t=0;for(let r=0;r<v*L/2;r++)t=r%O.length,e.push(t,t);let r=eH(e);for(let e=1;e<L+1;e++)for(let t=1;t<v+1;t++)I[e][t]=r.pop()},ey=()=>{console.log("需要打乱数据");let e=[];for(let t=1;t<L+1;t++)for(let r=1;r<v+1;r++)e.push(I[t][r]);let t=eH(e);for(let e=1;e<L+1;e++)for(let r=1;r<v+1;r++)I[e][r]=t.pop()},eS=(e,t,r,o=h)=>{e=e_(e),t=e_(t),D.strokeStyle=M,D.lineWidth=w,D.strokeRect(e-w/2,t-w/2,o+w,o+w),et[r]?D.drawImage(ee[r],e,t,o,o):(D.fillStyle=C[r%C.length],D.fillRect(e,t,o,o))},eR=(e=[B,P,q,z],t=5,r=T)=>{JSON.stringify(q)===JSON.stringify(z)&&e.splice(2,1),JSON.stringify(B)===JSON.stringify(P)&&e.splice(1,1);let o=(e=e.map(e=>({...e,ox:.5,oy:.5}))).length;e[0].x===e[1].x?e[0].oy=+(e[0].y<e[1].y):e[0].ox=+(e[0].x<e[1].x),e[o-1].x===e[o-2].x&&(e[o-1].oy=+(e[o-1].y<e[o-2].y)),e[o-1].y===e[o-2].y&&(e[o-1].ox=+(e[o-1].x<e[o-2].x)),e=e.map(({x:e,y:t,ox:r,oy:o})=>({x:e_(e)+h*r,y:e_(t)+h*o})),D.lineWidth=t,D.strokeStyle=r,D.beginPath();let{x:a,y:n}=e.shift();D.moveTo(a,n),e.forEach(({x:e,y:t})=>D.lineTo(e,t)),D.stroke()},em=()=>{if(clearTimeout(G),!ea()){for(;!ec();)ey();G=setTimeout(()=>{ef(K.x,K.y,"red"),ef(X.x,X.y,"red")},5e3)}D.clearRect(0,0,U,k),eg(),ed(),I.forEach((e,t)=>e.forEach((e,r)=>-1!==e&&eS(t,r,e)))},eu=async()=>{es(),O.forEach((e,t)=>{if(et[t])return;let r=new Image;r.src=e,ee[t]=r,r.onload=()=>{et[t]=!0,I.forEach((e,t)=>e.forEach((e,r)=>-1!==e&&eS(t,r,e)))}}),em()};window.onload=eu;